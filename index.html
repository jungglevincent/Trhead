<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulasi Thread - Restoran</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">
  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-center">Simulasi Thread: Restoran</h1><div class="bg-white p-4 rounded shadow mb-6">
  <h2 class="text-xl font-semibold mb-2">Penjelasan Singkat</h2>
  <p class="mb-2">
    <strong>Thread</strong> adalah unit terkecil dari eksekusi dalam proses. Dalam konteks restoran, bisa diibaratkan sebagai pelayan, kasir, atau koki yang bekerja secara paralel atau satu per satu.
  </p>
  <p class="mb-2">
    <strong>Synchronous</strong> berarti tugas dilakukan satu per satu (misalnya hanya ada 1 pelayan melayani semua pelanggan satu per satu).
  </p>
  <p class="mb-2">
    <strong>Asynchronous</strong> berarti tugas bisa dilakukan bersamaan oleh beberapa thread (misalnya beberapa pelayan bekerja sekaligus).
  </p>
  <p>
    Dalam simulasi ini, kamu bisa melihat bagaimana pelanggan dilayani oleh pelayan (thread) dalam mode synchronous atau asynchronous, dan merasakan perbedaan waktu pelayanan.
  </p>
</div>

<div class="mb-4">
  <p class="mb-2">Pilih mode simulasi:</p>
  <button onclick="startSimulation(true)" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded mr-2">Synchronous</button>
  <button onclick="startSimulation(false)" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Asynchronous</button>
</div>

<div id="status" class="mb-4 font-medium text-lg"></div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
  <div class="bg-white p-4 rounded shadow">
    <h2 class="font-bold mb-2">Antrian Pelanggan</h2>
    <ul id="queue" class="space-y-1 transition-all duration-500"></ul>
  </div>

  <div class="bg-white p-4 rounded shadow md:col-span-2">
    <h2 class="font-bold mb-2">Pelayan (Threads)</h2>
    <div id="servers" class="space-y-2"></div>
  </div>
</div>

  </div>  <script>
    const queueEl = document.getElementById("queue");
    const serversEl = document.getElementById("servers");
    const statusEl = document.getElementById("status");

    let customerQueue = [];
    let customersServed = 0;
    let totalCustomers = 10;

    function startSimulation(isSynchronous) {
      customerQueue = Array.from({ length: totalCustomers }, (_, i) => `Pelanggan ${i + 1}`);
      customersServed = 0;
      queueEl.innerHTML = customerQueue.map(c => `<li class='bg-gray-200 px-2 py-1 rounded'>${c}</li>`).join("");
      serversEl.innerHTML = "";
      statusEl.textContent = isSynchronous ? "Mode: Synchronous (1 pelayan)" : "Mode: Asynchronous (3 pelayan)";

      const totalServers = isSynchronous ? 1 : 3;

      for (let i = 0; i < totalServers; i++) {
        const server = document.createElement("div");
        server.id = `server-${i}`;
        server.className = "p-2 border rounded bg-yellow-100";
        server.textContent = `Pelayan ${i + 1} menunggu pelanggan...`;
        serversEl.appendChild(server);
        simulateServer(i);
      }
    }

    function simulateServer(serverId) {
      const serverEl = document.getElementById(`server-${serverId}`);
      function serve() {
        const customer = customerQueue.shift();
        if (customer) {
          serverEl.textContent = `Pelayan ${serverId + 1} melayani ${customer}...`;
          updateQueue();
          setTimeout(() => {
            customersServed++;
            serverEl.textContent = `Pelayan ${serverId + 1} selesai dengan ${customer}`;
            if (customersServed === totalCustomers) {
              statusEl.textContent += " | Semua pelanggan sudah dilayani!";
              return;
            }
            serve();
          }, 1000 + Math.random() * 2000);
        } else {
          serverEl.textContent = `Pelayan ${serverId + 1} menunggu pelanggan...`;
        }
      }
      serve();
    }

    function updateQueue() {
      queueEl.innerHTML = customerQueue.map(c => `<li class='bg-gray-200 px-2 py-1 rounded transition-all duration-500'>${c}</li>`).join("");
    }
  </script></body>
</html>
